@using MapLab.Web.Models.Templates
@using MapLab.Services.Contracts
@using Microsoft.AspNetCore.Components
@inject IMapService _mapService

<Modal Id="@Id"
       OnFinish="OnFinish">
    <ModalStep Title="Choose Template">
        <ChooseTemplate @bind-SelectedMapTemplate="SelectedMapTemplate" />
    </ModalStep>
    <ModalStep Title="Name Your Map">
        <NameMap SelectedMapTemplate="SelectedMapTemplate" @bind-Name="Name" />
    </ModalStep>
</Modal>

@code {
    [Parameter] public string? Id { get; set; }

    public string? Name { get; set; }

    public MapTemplateViewModel? SelectedMapTemplate { get; set; }

    public async Task OnFinish()
    {
        await _mapService.CreateMapAsync(Name!, SelectedMapTemplate!.Id!);
    }
}
